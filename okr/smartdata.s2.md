# SmartData (第二阶段)

## 整体目标:
> 说明: 本阶段不涉及用户、权限、登录相关特性对接
1. `数据模型`相关特性对接至自建服务 **完成**
2. `菜单目录`相关特性对接至自建服务 **完成**
3. 前端体验优化
4. 支持单机部署
5. 智能卡片

-------------------------------------------------------------------------------

### 场景: 智能卡片
   #### 目标：
   1. 把 SmartData 的聊天功能单独抽出来并允许被外部系统引用 (iFrame)
   2. 聊天过程可以选择表（多选，类似提问建表）
   3. 可以把聊天结果保存起来（保存至执行系统）
   4. 卡片内容会以块的形式显示在门户控件中
   5. 卡版内容分为: 静态内容, 动态内容

   #### 场景拆分：
   **准备阶段**
      1. 参考 db-gpt 的数据传输、存储结果、卡片显示逻辑

   **控件开发 (SmartData)**
      1. 封装聊天控件，可以被外部系统以 url (iFrame)形式引入
      2. 可以选择范围 (多选表), 把表数据查出来并 /submitdata
      3. 把聊天结果保存到执行系统

   **控件开发 (V-Act)**
   > 不使用工具端配置，改为在配置中心配置门户卡片的内容
      1. 前端控件: 门户控件改造
      2. 配置中心: 门户配置页面

-------------------------------------------------------------------------------

## 8.29
### 项目
   - 【完成】打开窗体偶发获取域报错问题
   - 【完成】获取列表数据错误滚动定位问题
### 前端
   - 【完成】提问建表多项目调整
   - 【进行中】SD服务器迁移 docker 运行环境
      > 完成: 测试库迁移
      > 测试环境验证一段时间再迁移正式环境
   - 【测试中】基座读取配置加载首页 (用于加载门户首页)
   - 【测试中】卡片自适应布局问题
   - 【测试中】多项目需要增加上下文参数的接口
      > 未对接: /webapi/ydg_vmcdm_custom_api/saveCustomCatalog
      > 未对接: /webapi/ydg_vmcdm_custom_api/getCustomCatalogEntityTree
      > 未对接: /webapi/innersysapi/VMcdmDataServiceWebApi/findAllBizCustomEntity

### 需求池
   - 数据透视
   - 存储 Prompt 模板
   - MCMD: 发布模型时, 允许编辑表名及字段名 **完成**
   - MCDM: 发布模型时, 更新频率接口对接 **完成**
   - MCDM: 表间数据复制 **完成**
   - MCDM: 保存文件导入的原文件 **完成**
   - LLM: TalkData 智能分析
   - LLM: 修改模型元信息时重新训练 **完成**
   - LLM: 存储训练数据 (修改模型时重训) **完成**
   - LLM: 报告模板管理
   - LLM: 报告生成
   - LLM: 数据分析分析
      1. 缺失值处理
         - 检测缺失值：识别数据中的NaN或None值。
         - 删除缺失值：删除包含缺失值的行或列。
         - 填补缺失值：使用均值、中位数、众数、前后值、插值或自定义值方法填补缺失值。
      2. 重复值处理
         - 检测重复值（值匹配或语义匹配）：识别重复的行或列。
         - 删除重复值：删除重复的行或列，保留唯一记录。
      3. 数据格式标准化
         - 日期格式化：统一日期格式。
         - 字符串格式化：统一字符串的大小写、修剪空白字符等。
         - 数值格式化：将数值统一到同一单位或范围。
      4. 异常值处理
         - 检测异常值：使用统计方法或规则识别异常值。
         - 处理异常值：删除、替换或校正异常值。
      5. 数据类型转换
         - 数据类型检测：检测数据类型是否正确。
         - 数据类型转换：将数据转换为所需的数据类型，如字符串转日期、浮点数转整数等。
      6. 噪声数据处理
         - 去除噪声：移除无意义的字符、标点符号等。
         - 数据校验：使用规则或正则表达式验证数据的格式和内容。
      7. 数据分组与聚合
         - 数据分组：基于一个或多个字段对数据进行分组。
         - 数据聚合：对分组数据进行统计汇总，如求和、平均值等。
      8. 复杂字符串处理
         - 字符串提取：从字符串中提取特定模式的数据。
         - 字符串替换：替换字符串中的特定字符或模式。
      9. 多条件数据清洗
         - 条件过滤：基于复杂条件过滤数据。
         - 条件更新：基于条件更新数据的值。
      10. 数据校验
         - 格式校验：校验数据的格式是否符合规范。
         - 逻辑校验：校验数据的逻辑是否符合业务规则。
   - LLM: 持久化智能导入返回的ID **完成**
   - LLM: 智能导入可维护更新频率 **完成**
   - Workflow: Docker 部署 **进行中**
   - 模型树: 拖拽排序 **完成**
   - 模型树: 创建目录 **完成**
   - 提问建表: 持久化会话数据
   - 提问建表: 优化选择模型范围操作体验 **完成**
   - 语义检索: 语义检索维护页面 **完成**
   - 语义检索: 把“字段”标记为“可语义检索” **完成**
   - 语义检索: 把“字段组合”标记为“可语义检索” **完成**
   - 语义检索: 对"指定标记字段"进行语义检索 **完成**
   - 语义检索: 对"指定标记字段组合"进行语义检索 **完成**
   - 语义检索: 对"所有标记字段"进行全局检索 **进行中**
   - 语义检索: 定时推送标记数据集 **完成**
   - 智能表单: 自动推荐内容值
   - 数据导入: 字段映射时自动根据AI的建议自动匹配映射
   - 表结构定义: 可配置外键关联

### 平台
   - 【未开始】V: 门户卡片化
   - 【未开始】V: 门户卡片可配置
   - 【完成】V: 小数精度显示问题
   - 【暂缓】V: 前端导出规则不要把隐藏的字段也导出来 (项目不急)
